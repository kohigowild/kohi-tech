---
    title: #02. Suspense ì„¸íŒ…
    created_time: 2024-07-06T11:32:00.000Z
    ---
    
![db7f4d1291c49f41fbb7d2bfa667065a.jpg](https://prod-files-secure.s3.us-west-2.amazonaws.com/420927ef-2057-4e77-b9b7-d7005a1db0dd/7cdfb220-b6f4-44e6-bff9-69a8b660e061/db7f4d1291c49f41fbb7d2bfa667065a.jpg?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240809%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240809T002522Z&X-Amz-Expires=3600&X-Amz-Signature=543bfcc6e8053c6c026a368b24ff42286d4d2f694513b0c2ae442da75e0e86cb&X-Amz-SignedHeaders=host&x-id=GetObject)


> ğŸ’¡ useSearchParams() should be wrapped in a suspense boundary at page â€œ/â€


## Suspenseë€ ë¬´ì—‡ì¸ê°€


> ë°ì´í„° ë¡œë”©ì´ë‚˜ ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…ê³¼ ê°™ì€ ì§€ì—°ëœ ë¦¬ì†ŒìŠ¤ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ê¸°ëŠ¥


ì˜ˆë¥¼ ë“¤ì–´, `next/dynamic` í•¨ìˆ˜ì™€ í•¨ê»˜ ì‚¬ìš©í•˜ì—¬ ì½”ë“œë¥¼ í•„ìš”í•  ë•Œ ë¡œë“œí•˜ê±°ë‚˜, `SWR` ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ ê°™ì€ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ ì—°ë™í•˜ì—¬ ë°ì´í„°ê°€ ë¡œë“œë  ë•Œê¹Œì§€ ëŒ€ê¸°í•˜ëŠ” ë° í™œìš©ëœë‹¤. SuspenseëŠ” ì‚¬ìš©ì ê²½í—˜ì„ í–¥ìƒì‹œí‚¤ê³ , ë°ì´í„° ë¡œë”© ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” ë° ë„ì›€ì„ ì¤€ë‹¤.

- ì‚¬ìš©ì ê²½í—˜ ê°œì„ : ë°ì´í„°ê°€ ë¡œë”©ë˜ëŠ” ë™ì•ˆ ì‚¬ìš©ìì—ê²Œ ë¡œë”© ìƒíƒœë¥¼ í‘œì‹œí•˜ê±°ë‚˜ ëŒ€ì²´ ì½˜í…ì¸ ë¥¼ ë³´ì—¬ì¤„ ìˆ˜ ìˆë‹¤. ì´ë¡œ ì¸í•´ ì‚¬ìš©ìëŠ” ëŒ€ê¸°í•˜ëŠ” ë™ì•ˆ ë” ë‚˜ì€ ì‚¬ìš©ì ê²½í—˜ì„ ê²½í—˜í•  ìˆ˜ ìˆë‹¤.
- ì½”ë“œ ìŠ¤í”Œë¦¬íŒ… ê´€ë¦¬: `next/dynamic` í•¨ìˆ˜ì™€ í•¨ê»˜ ì‚¬ìš©í•˜ì—¬ í•„ìš”í•  ë•Œ ì½”ë“œë¥¼ ë¡œë“œí•  ìˆ˜ ìˆë‹¤. ì´ëŠ” ì´ˆê¸° í˜ì´ì§€ ë¡œë”© ì‹œì ì„ ìµœì í™”í•˜ê³ , í•„ìš”í•˜ì§€ ì•Šì€ ì½”ë“œë¥¼ ì œê±°í•˜ì—¬ í˜ì´ì§€ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆë‹¤.
- ë°ì´í„° ë¡œë”© ìµœì í™”: ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ë¼ì´ë¸ŒëŸ¬ë¦¬ì¸ `SWR`ê³¼ ê²°í•©í•˜ì—¬ ë°ì´í„°ê°€ ë¡œë”©ë  ë•Œê¹Œì§€ Suspenseë¥¼ ì‚¬ìš©í•˜ì—¬ ë¡œë”© ìƒíƒœë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤. ì´ëŠ” ë°ì´í„° ì˜ì¡´ì„±ì„ ê´€ë¦¬í•˜ê³ , í•„ìš”í•œ ë°ì´í„°ê°€ ì¤€ë¹„ë  ë•Œê¹Œì§€ ëŒ€ê¸°í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.

```javascript
import { Suspense } from 'react';
import { useSWR } from 'swr';

const fetchData = async () => {
  const response = await fetch('/api/data');
  const data = await response.json();
  return data;
};

const MyComponent = () => {
  const { data, error } = useSWR('/api/data', fetchData);

  if (error) return <div>Failed to load data</div>;

  return (
    <Suspense fallback={<div>Loading...</div>}>
      <div>
        {data ? (
          <ul>
            {data.map(item => (
              <li key={item.id}>{item.name}</li>
            ))}
          </ul>
        ) : (
          <div>No data yet</div>
        )}
      </div>
    </Suspense>
  );
};

export default MyComponent;
```


ìœ„ ì˜ˆì œì—ì„œ `Suspense`ëŠ” ë°ì´í„°ê°€ ë¡œë”©ë˜ëŠ” ë™ì•ˆ `Loading...`ì„ ë³´ì—¬ì£¼ê³ , ë°ì´í„°ê°€ ì¤€ë¹„ë˜ë©´ ë¦¬ìŠ¤íŠ¸ë¥¼ ë Œë”ë§í•œë‹¤. ì´ë¥¼ í†µí•´ ì‚¬ìš©ìëŠ” ë°ì´í„°ê°€ ì¤€ë¹„ë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦´ í•„ìš” ì—†ì´ ì‚¬ìš©ì ê²½í—˜ì„ ê°œì„ í•  ìˆ˜ ìˆë‹¤.


![43e0be5c39bbedfb7e6deb3b34a0f206.jpg](https://prod-files-secure.s3.us-west-2.amazonaws.com/420927ef-2057-4e77-b9b7-d7005a1db0dd/cb10070c-0267-4106-89e3-6b7faab2f364/43e0be5c39bbedfb7e6deb3b34a0f206.jpg?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240809%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240809T002522Z&X-Amz-Expires=3600&X-Amz-Signature=dd6f8ea85e766479fa18cd87cf98a9843b4c294a58604c3234588f2add60c53e&X-Amz-SignedHeaders=host&x-id=GetObject)


> ğŸ’¡ Next.jsì—ì„œ í˜ì´ì§€ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê±°ë‚˜ URL ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¥¼ ì‚¬ìš©í•  ë•Œ, ì´ ì‘ì—…ì´ ë¹„ë™ê¸°ë¡œ ì²˜ë¦¬ë  ìˆ˜ ìˆëŠ”ë°, ì´ëŸ° ê²½ìš° Suspenseë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ê°€ ì¤€ë¹„ë  ë•Œê¹Œì§€ ëŒ€ê¸°í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•´ì•¼ í•œë‹¤.


## Suspense ì ìš©


```javascript
import React, { Suspense } from 'react'
import Loading from '@/components/common/Loading'

export default function SuspenseProvider({
  children,
}: Readonly<{
  children: React.ReactNode
}>) {
  return <Suspense fallback={<Loading />}>{children}</Suspense>
}
```


```javascript
export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode
}>) {
  return (
    <html lang='ko'>
      <RecoilProvider>
        <QueryProvider>
          <Suspense>
            <body>
              {children}
            </body>
          </Suspense>
        </QueryProvider>
      </RecoilProvider>
    </html>
  )
}
```


SuspenseProvider ì»´í¬ë„ŒíŠ¸ë¥¼ RootLayoutì—ì„œ body íƒœê·¸ë¥¼ ê°ì‹¸ê³  ë‚´ë¶€ í˜ì´ì§€ ì „ì²´ì— suspenseê°€ ì ìš©ë  ìˆ˜ ìˆë„ë¡ í–ˆë‹¤. í˜ì´ì§€ ë‚´ë¶€ ë°ì´í„°ê°€ ë¡œë”©ë˜ëŠ” ë™ì•ˆ Loading ì»´í¬ë„ŒíŠ¸ë¥¼ ë³´ì—¬ì¤€ë‹¤.


![%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-07-06_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_9.06.54.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/420927ef-2057-4e77-b9b7-d7005a1db0dd/cf785f82-9e00-436f-9fb5-fcc8a5b49401/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-07-06_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_9.06.54.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240809%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240809T002522Z&X-Amz-Expires=3600&X-Amz-Signature=f0e7bb9a502a87cb4bbe5111a2776a632a5de17c0ed45578acbd969e0c8daaf4&X-Amz-SignedHeaders=host&x-id=GetObject)


ë¹Œë“œ ì˜¤ë¥˜ë„ í•´ê²° ì™„ 

