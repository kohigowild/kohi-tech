---
title: Sample Title
date: Unknown
---
{"parent":"\n> CORS란 무엇인가\n\n\nCORS는 \"Cross-Origin Resource Sharing\"의 줄임말로, 웹 브라우저에서 실행되는 웹 페이지가 다른 출처(도메인, 프로토콜, 포트)의 자원에 접근할 수 있는 메커니즘을 말한다. 보안 상의 이유로 브라우저는 기본적으로 다른 출처의 자원에 접근을 제한하는데, CORS는 이 제한을 우회하고 안전하게 다른 출처의 자원에 접근할 수 있는 방법을 제공한다. 쉽게 말해서 웹 브라우저에서 실행되는 웹 페이지가 다른 도메인(출처)의 자원에 접근하는 것을 허용하는 메커니즘이다. 웹 브라우저는 보안상의 이유로 기본적으로 다른 출처의 자원에 접근을 제한하는데, 이는 다른 도메인, 프로토콜, 포트를 가진 리소스에 대한 보호를 위함이다.\n\n\n예를 들어, 웹페이지가 `https://www.example.com` 도메인에서 실행 중일 때, 이 페이지가 `https://kohi-dev.com/api/data`와 같은 다른 도메인의 API에 접근하려고 하면 브라우저는 CORS 정책에 따라 이 요청을 차단할 수 있다. CORS는 이러한 제한을 우회하고, 서버 측에서 안전하게 다른 출처의 자원에 접근할 수 있는 방법을 제공한다.\n\n\n## 그런데 노션이 CORS를 제공하지 않는다 이걸 상당히 뒤늦게 봄\n\n\n![280bde0b6ffe5b78068686572e86dd49.jpg](https://prod-files-secure.s3.us-west-2.amazonaws.com/420927ef-2057-4e77-b9b7-d7005a1db0dd/295e99ed-47d7-4d1c-a0e5-6356aa42094e/280bde0b6ffe5b78068686572e86dd49.jpg?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240808%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240808T140950Z&X-Amz-Expires=3600&X-Amz-Signature=c895e822c6214b0b70e5198750422b444d5370f504f49f21b7803edae53c22bc&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\n나의 절친 미은이가 블로그 만드는데 몇 시간 정도 걸릴 것 같냐고 물어봐서 머 ㅋㅋ 블로그 정도는 ㅋㅋ 다섯 시간? 이러고 시건방을 떨었던 과거의 나를 반성하고 미워하고 원망하고… 프록시 설정 시도도 해보고 CORS Anywhere (지금은 유료임) 관련 자료도 찾아보면서 이렇게 저렇게 삽질하던 중 문득 머리를 스쳐지나간 것\n\n\n## 서버와 서버 간 통신은 기본적으로 CORS 이슈가 발생하지 않는다\n\n\n근데 마침 습관적으로 nextjs 세팅해둔 상태였짠\n\n\n아!!!!!!!!!!!!!!!!!!!!!!!!! 🍀\n\n\n![066389b3814e02dec7c01ab8f8dd4664.jpg](https://prod-files-secure.s3.us-west-2.amazonaws.com/420927ef-2057-4e77-b9b7-d7005a1db0dd/60f306c7-ecd8-468c-a396-998b58c32756/066389b3814e02dec7c01ab8f8dd4664.jpg?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240808%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240808T140950Z&X-Amz-Expires=3600&X-Amz-Signature=d94e2b6859c963c46669e3f5ce216e4076f5dd6c6214868708db623af397b40e&X-Amz-SignedHeaders=host&x-id=GetObject)\n\n\n```javascript\n/app/api/notion/route.ts\n\nimport { Client } from '@notionhq/client'\n\nconst notion = new Client({ auth: process.env.NEXT_PUBLIC_NOTION_TOKEN })\n\nexport async function GET() {\n  try {\n    const res = await notion.databases.query({\n      database_id: process.env.NEXT_PUBLIC_DATABASE_ID || '',\n    })\n\n    return new Response(JSON.stringify(res), {\n      status: 200,\n      headers: {\n        'Content-Type': 'application/json',\n        'Notion-Version': '2022-06-28',\n      },\n    })\n  } catch (error) {\n    console.error(error)\n  }\n}\n```\n\n\nnextjs에서 API 라우트를 설정하고 해당 라우트에서 Notion API에 HTTP 요청을 보내고 응답을 처리하면 CORS 문제를 걱정하지 않아도 된다.\n\n- Notion-Version을 필히 명시해서 헤더에 담아줘야 함\n\n```javascript\n  const { data } = useCustomQuery(\n    'postList',\n    () => useFetch({ url: '/api/notion' }),\n    {\n      enabled: !currentPost?.length,\n    }\n  )\n```\n\n\n클라이언트 측에서는 API 엔드포인트인 `/api/notion` 을 호출하여 데이터를 가져올 수 있다.\n\n\n## Reference\n\n\n화해 블로그 정말 감사합니다 화장품 정보는 역시 화해\n\n\n[https://blog.hwahae.co.kr/all/tech/10960](https://blog.hwahae.co.kr/all/tech/10960)\n\n"}